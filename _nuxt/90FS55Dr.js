import{B as k,d as M,c as y,C as P,s as z,D as N,E as U,G as F,H as V,I as G,l as $,J,K as q,L as O,M as Q,N as X,O as B,z as I,P as Y,Q as Z,R as K,S as ee,T as E,U as te,V as C,W as ie}from"./RexypaFC.js";async function H(e,t=k()){const{path:r,matched:i}=t.resolve(e);if(!i.length||(t._routePreloaded||(t._routePreloaded=new Set),t._routePreloaded.has(r)))return;const n=t._preloadPromises=t._preloadPromises||[];if(n.length>4)return Promise.all(n).then(()=>H(e,t));t._routePreloaded.add(r);const a=i.map(o=>{var s;return(s=o.components)==null?void 0:s.default}).filter(o=>typeof o=="function");for(const o of a){const s=Promise.resolve(o()).catch(()=>{}).finally(()=>n.splice(n.indexOf(s)));n.push(s)}await Promise.all(n)}const re=(...e)=>e.find(t=>t!==void 0);function ne(e){const t=e.componentName||"NuxtLink";function r(i,n){if(!i||e.trailingSlash!=="append"&&e.trailingSlash!=="remove")return i;if(typeof i=="string")return A(i,e.trailingSlash);const a="path"in i&&i.path!==void 0?i.path:n(i).path;return{...i,name:void 0,path:A(a,e.trailingSlash)}}return M({name:t,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(i,{slots:n}){const a=k(),o=B(),s=y(()=>{const c=i.to||i.href||"";return r(c,a.resolve)}),u=y(()=>typeof s.value=="string"&&P(s.value,{acceptRelative:!0})),d=y(()=>i.target&&i.target!=="_self"),h=y(()=>i.external||d.value?!0:typeof s.value=="object"?!1:s.value===""||u.value),m=z(!1),p=z(null),l=c=>{var w;p.value=i.custom?(w=c==null?void 0:c.$el)==null?void 0:w.nextElementSibling:c==null?void 0:c.$el};if(i.prefetch!==!1&&i.noPrefetch!==!0&&i.target!=="_blank"&&!se()){const w=I();let b,v=null;N(()=>{const _=ae();U(()=>{b=F(()=>{var f;(f=p==null?void 0:p.value)!=null&&f.tagName&&(v=_.observe(p.value,async()=>{v==null||v(),v=null;const g=typeof s.value=="string"?s.value:a.resolve(s.value).fullPath;await Promise.all([w.hooks.callHook("link:prefetch",g).catch(()=>{}),!h.value&&H(s.value,a).catch(()=>{})]),m.value=!0}))})})}),V(()=>{b&&G(b),v==null||v(),v=null})}return()=>{var v,_;if(!h.value){const f={ref:l,to:s.value,activeClass:i.activeClass||e.activeClass,exactActiveClass:i.exactActiveClass||e.exactActiveClass,replace:i.replace,ariaCurrentValue:i.ariaCurrentValue,custom:i.custom};return i.custom||(m.value&&(f.class=i.prefetchedClass||e.prefetchedClass),f.rel=i.rel||void 0),$(J("RouterLink"),f,n.default)}const c=typeof s.value=="object"?((v=a.resolve(s.value))==null?void 0:v.href)??null:s.value&&!i.external&&!u.value?r(q(o.app.baseURL,s.value),a.resolve):s.value||null,w=i.target||null,b=re(i.noRel?"":i.rel,e.externalRelAttribute,u.value||d.value?"noopener noreferrer":"")||null;if(i.custom){if(!n.default)return null;const f=()=>Y(c,{replace:i.replace,external:i.external});return n.default({href:c,navigate:f,get route(){if(!c)return;const g=O(c);return{path:g.pathname,fullPath:g.pathname,get query(){return Q(g.search)},hash:g.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:c}},rel:b,target:w,isExternal:h.value,isActive:!1,isExactActive:!1})}return $("a",{ref:p,href:c,rel:b,target:w},(_=n.default)==null?void 0:_.call(n))}}})}const Ae=ne(X);function A(e,t){const r=t==="append"?Z:K;return P(e)&&!e.startsWith("http")?e:r(e,!0)}function ae(){const e=I();if(e._observer)return e._observer;let t=null;const r=new Map,i=(a,o)=>(t||(t=new IntersectionObserver(s=>{for(const u of s){const d=r.get(u.target);(u.isIntersecting||u.intersectionRatio>0)&&d&&d()}})),r.set(a,o),t.observe(a),()=>{r.delete(a),t.unobserve(a),r.size===0&&(t.disconnect(),t=null)});return e._observer={observe:i}}function se(){const e=navigator.connection;return!!(e&&(e.saveData||/2g/.test(e.effectiveType)))}async function oe(e,t){return await le(t).catch(i=>(console.error("Failed to get image meta for "+t,i+""),{width:0,height:0,ratio:0}))}async function le(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const i=new Image;i.onload=()=>{const n={width:i.width,height:i.height,ratio:i.width/i.height};t(n)},i.onerror=n=>r(n),i.src=e})}function W(e){return t=>t?e[t]||t:e.missingValue}function ce({formatter:e,keyMap:t,joinWith:r="/",valueMap:i}={}){e||(e=(a,o)=>`${a}=${o}`),t&&typeof t!="function"&&(t=W(t));const n=i||{};return Object.keys(n).forEach(a=>{typeof n[a]!="function"&&(n[a]=W(n[a]))}),(a={})=>Object.entries(a).filter(([s,u])=>typeof u<"u").map(([s,u])=>{const d=n[s];return typeof d=="function"&&(u=d(a[s])),s=typeof t=="function"?t(s):s,e(s,u)}).join(r)}function S(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return parseInt(e,10)}function ue(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const r of e.split(" ")){const i=parseInt(r.replace("x",""));i&&t.add(i)}return Array.from(t)}function de(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function fe(e){const t={};if(typeof e=="string")for(const r of e.split(/[\s,]+/).filter(i=>i)){const i=r.split(":");i.length!==2?t["1px"]=i[0].trim():t[i[0].trim()]=i[1].trim()}else Object.assign(t,e);return t}function he(e){const t={options:e},r=(n,a={})=>L(t,n,a),i=(n,a={},o={})=>r(n,{...o,modifiers:E(a,o.modifiers||{})}).url;for(const n in e.presets)i[n]=(a,o,s)=>i(a,o,{...e.presets[n],...s});return i.options=e,i.getImage=r,i.getMeta=(n,a)=>ge(t,n,a),i.getSizes=(n,a)=>pe(t,n,a),t.$img=i,i}async function ge(e,t,r){const i=L(e,t,{...r});return typeof i.getMeta=="function"?await i.getMeta():await oe(e,i.url)}function L(e,t,r){var d,h;if(typeof t!="string"||t==="")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(t.startsWith("data:"))return{url:t};const{provider:i,defaults:n}=ve(e,r.provider||e.options.provider),a=me(e,r.preset);if(t=P(t)?t:ee(t),!i.supportsAlias)for(const m in e.options.alias)t.startsWith(m)&&(t=q(e.options.alias[m],t.substr(m.length)));if(i.validateDomains&&P(t)){const m=O(t).host;if(!e.options.domains.find(p=>p===m))return{url:t}}const o=E(r,a,n);o.modifiers={...o.modifiers};const s=o.modifiers.format;(d=o.modifiers)!=null&&d.width&&(o.modifiers.width=S(o.modifiers.width)),(h=o.modifiers)!=null&&h.height&&(o.modifiers.height=S(o.modifiers.height));const u=i.getImage(t,o,e);return u.format=u.format||s||"",u}function ve(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function me(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function pe(e,t,r){var c,w,b,v,_;const i=S((c=r.modifiers)==null?void 0:c.width),n=S((w=r.modifiers)==null?void 0:w.height),a=fe(r.sizes),o=(b=r.densities)!=null&&b.trim()?ue(r.densities.trim()):e.options.densities;de(o);const s=i&&n?n/i:0,u=[],d=[];if(Object.keys(a).length>=1){for(const f in a){const g=j(f,String(a[f]),n,s,e);if(g!==void 0){u.push({size:g.size,screenMaxWidth:g.screenMaxWidth,media:`(max-width: ${g.screenMaxWidth}px)`});for(const x of o)d.push({width:g._cWidth*x,src:R(e,t,r,g,x)})}}ye(u)}else for(const f of o){const g=Object.keys(a)[0];let x=j(g,String(a[g]),n,s,e);x===void 0&&(x={size:"",screenMaxWidth:0,_cWidth:(v=r.modifiers)==null?void 0:v.width,_cHeight:(_=r.modifiers)==null?void 0:_.height}),d.push({width:f,src:R(e,t,r,x,f)})}we(d);const h=d[d.length-1],m=u.length?u.map(f=>`${f.media?f.media+" ":""}${f.size}`).join(", "):void 0,p=m?"w":"x",l=d.map(f=>`${f.src} ${f.width}${p}`).join(", ");return{sizes:m,srcset:l,src:h==null?void 0:h.src}}function j(e,t,r,i,n){const a=n.options.screens&&n.options.screens[e]||parseInt(e),o=t.endsWith("vw");if(!o&&/^\d+$/.test(t)&&(t=t+"px"),!o&&!t.endsWith("px"))return;let s=parseInt(t);if(!a||!s)return;o&&(s=Math.round(s/100*a));const u=i?Math.round(s*i):r;return{size:t,screenMaxWidth:a,_cWidth:s,_cHeight:u}}function R(e,t,r,i,n){return e.$img(t,{...r.modifiers,width:i._cWidth?i._cWidth*n:void 0,height:i._cHeight?i._cHeight*n:void 0},r)}function ye(e){var r;e.sort((i,n)=>i.screenMaxWidth-n.screenMaxWidth);let t=null;for(let i=e.length-1;i>=0;i--){const n=e[i];n.media===t&&e.splice(i,1),t=n.media}for(let i=0;i<e.length;i++)e[i].media=((r=e[i+1])==null?void 0:r.media)||""}function we(e){e.sort((r,i)=>r.width-i.width);let t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.width===t&&e.splice(r,1),t=i.width}}const Se=ce({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>C(e)+"_"+C(t)}),be=(e,{modifiers:t={},baseURL:r}={},i)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const n=Se(t)||"_";return r||(r=q(i.options.nuxt.baseURL,"/_ipx")),{url:q(r,n,te(e))}},_e=!0,xe=!0,Pe=Object.freeze(Object.defineProperty({__proto__:null,getImage:be,supportsAlias:xe,validateDomains:_e},Symbol.toStringTag,{value:"Module"})),D={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};D.providers={ipxStatic:{provider:Pe,defaults:{}}};const T=()=>{const e=B(),t=I();return t.$img||t._img||(t._img=he({...D,nuxt:{baseURL:e.app.baseURL}}))};function ze(e){var t;(t=performance==null?void 0:performance.mark)==null||t.call(performance,"mark_feature_usage",{detail:{feature:e}})}const qe={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},densities:{type:String,default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],default:void 0}},Ie=e=>{const t=y(()=>({provider:e.provider,preset:e.preset})),r=y(()=>({width:S(e.width),height:S(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),i=T(),n=y(()=>({...e.modifiers,width:S(e.width),height:S(e.height),format:e.format,quality:e.quality||i.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:r,modifiers:n}},$e={...qe,placeholder:{type:[Boolean,String,Number,Array],default:void 0}},We=M({name:"NuxtImg",props:$e,emits:["load","error"],setup:(e,t)=>{const r=T(),i=Ie(e),n=z(!1),a=y(()=>r.getSizes(e.src,{...i.options.value,sizes:e.sizes,densities:e.densities,modifiers:{...i.modifiers.value,width:S(e.width),height:S(e.height)}})),o=y(()=>{const l={...i.attrs.value,"data-nuxt-img":""};return(!e.placeholder||n.value)&&(l.sizes=a.value.sizes,l.srcset=a.value.srcset),l}),s=y(()=>{let l=e.placeholder;if(l===""&&(l=!0),!l||n.value)return!1;if(typeof l=="string")return l;const c=Array.isArray(l)?l:typeof l=="number"?[l,l]:[10,10];return r(e.src,{...i.modifiers.value,width:c[0],height:c[1],quality:c[2]||50,blur:c[3]||3},i.options.value)}),u=y(()=>e.sizes?a.value.src:r(e.src,i.modifiers.value,i.options.value)),d=y(()=>s.value?s.value:u.value);if(e.preload){const l=Object.values(a.value).every(c=>c);ie({link:[{rel:"preload",as:"image",nonce:e.nonce,...l?{href:a.value.src,imagesizes:a.value.sizes,imagesrcset:a.value.srcset}:{href:d.value}}]})}const h=z(),p=I().isHydrating;return N(()=>{if(s.value){const l=new Image;l.src=u.value,e.sizes&&(l.sizes=a.value.sizes||"",l.srcset=a.value.srcset),l.onload=c=>{n.value=!0,t.emit("load",c)},ze("nuxt-image");return}h.value&&(h.value.complete&&p&&(h.value.getAttribute("data-error")?t.emit("error",new Event("error")):t.emit("load",new Event("load"))),h.value.onload=l=>{t.emit("load",l)},h.value.onerror=l=>{t.emit("error",l)})}),()=>$("img",{ref:h,src:d.value,...o.value,...t.attrs})}});export{We as _,Ae as a};
